if(function(e,o,n){var t,i=e.getElementsByTagName(o)[0];e.getElementById(n)||(t=e.createElement(o),t.id=n,t.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(t,i))}(document,"script","facebook-jssdk"),"undefined"!=typeof qodeSocialLoginVars)var facebookAppId=qodeSocialLoginVars.social.facebookAppId;facebookAppId&&(window.fbAsyncInit=function(){FB.init({appId:facebookAppId,cookie:!0,xfbml:!0,version:"v2.5"}),window.FB=FB}),function(e){"use strict";function o(){a(),r(),d(),c(),v(),s()}function n(){u(),g()}function t(){}function i(){}function a(){var o=e(".qode-login-opener"),n=e(".qode-membership-close-modal .icon_close"),t=e(".qode-login-register-holder");if(o){var i=e(".qode-login-register-content");o.click(function(e){e.preventDefault(),t.fadeIn(300),t.addClass("opened")}),t.click(function(e){t.hasClass("opened")&&(t.fadeOut(300),t.removeClass("opened"))}),e(".qode-login-register-content").click(function(e){e.stopPropagation()}),n.click(function(e){e.preventDefault(),t.hasClass("opened")&&(t.fadeOut(300),t.removeClass("opened"))}),e(window).on("keyup",function(e){t.hasClass("opened")&&27==e.keyCode&&(t.fadeOut(300),t.removeClass("opened"))}),i.tabs()}}function s(){var o=e(".header_bottom .qode-login-dropdown");if(o&&o.parent().offset()){var n=e(window).width();n-o.parent().offset().left<o.width()&&o.addClass("qode-dd-right-position")}}function r(){e(".qode-login-form").on("submit",function(o){o.preventDefault();var n={action:"qode_membership_login_user",security:e(this).find("#qode-login-security").val(),login_data:e(this).serialize()};return e.ajax({type:"POST",data:n,url:QodeAdminAjax.ajaxurl,success:function(e){var o;o=JSON.parse(e),l(o),"success"==o.status&&(window.location=o.redirect)}}),!1})}function d(){e(".qode-register-form").on("submit",function(o){o.preventDefault();var n={action:"qode_membership_register_user",security:e(this).find("#qode-register-security").val(),register_data:e(this).serialize()};return e.ajax({type:"POST",data:n,url:QodeAdminAjax.ajaxurl,success:function(e){var o;o=JSON.parse(e),l(o),"success"==o.status&&(window.location=o.redirect)}}),!1})}function c(){var o=e(".qode-reset-pass-form");o.submit(function(n){n.preventDefault();var t={action:"qode_membership_user_lost_password",user_login:o.find("#user_reset_password_login").val()};e.ajax({type:"POST",data:t,url:QodeAdminAjax.ajaxurl,success:function(e){var o=JSON.parse(e);l(o),"success"==o.status&&(window.location=o.redirect)}})})}function l(o){var n,t=e(".qode-membership-response-holder"),i=_.template(e(".qode-membership-response-template").html());n="success"===o.status?"qode-membership-message-succes":"qode-membership-message-error";var a={messageClass:n,message:o.message},s=i(a);t.html(s)}function u(){e(".qode-facebook-login-holder").submit(function(e){e.preventDefault(),window.FB.login(function(e){f(e)},{scope:"email, public_profile"})})}function f(e){"connected"===e.status?p():"not_authorized"===e.status?console.log("Please log into this app"):console.log("Please log into Facebook")}function p(){console.log("Welcome! Fetching information from Facebook..."),FB.api("/me","GET",{fields:"id, name, email, link, picture"},function(o){var n=e(".qode-facebook-login-holder [name^=qode_nonce_facebook_login]").val();o.nonce=n,o.image=o.picture.data.url;var t={action:"qode_membership_check_facebook_user",response:o};e.ajax({type:"POST",data:t,url:QodeAdminAjax.ajaxurl,success:function(e){var o;o=JSON.parse(e),l(o),"success"==o.status&&(window.location=o.redirect)}})})}function g(){if("undefined"!=typeof qodeSocialLoginVars)var o=qodeSocialLoginVars.social.googleClientId;if(o)gapi.load("auth2",function(){window.auth2=gapi.auth2.init({client_id:o}),m()});else{e(".qode-google-login-holder").submit(function(e){e.preventDefault()})}}function m(){e(".qode-google-login-holder").submit(function(e){e.preventDefault(),window.auth2.signIn(),h()})}function h(){if(window.auth2.isSignedIn.get()){var o=window.auth2.currentUser.get(),n=o.getBasicProfile(),t=e(".qode-google-login-holder [name^=qode_nonce_google_login]").val(),i={id:n.getId(),name:n.getName(),email:n.getEmail(),image:n.getImageUrl(),link:"https://plus.google.com/"+n.getId(),nonce:t},a={action:"qode_membership_check_google_user",response:i};e.ajax({type:"POST",data:a,url:QodeAdminAjax.ajaxurl,success:function(e){var o;o=JSON.parse(e),l(o),"success"==o.status&&(window.location=o.redirect)}})}}function v(){var o=e("#qode-membership-update-profile-form");if(o.length){var n=o.find("button"),t=n.data("updating-text"),i=n.data("updated-text");o.on("submit",function(o){o.preventDefault();var a=n.html();n.html(t);var s={action:"qode_membership_update_user_profile",data:e(this).serialize()};return e.ajax({type:"POST",data:s,url:QodeAdminAjax.ajaxurl,success:function(e){var o;o=JSON.parse(e),l(o),"success"==o.status?(n.html(i),window.location=o.redirect):n.html(a)}}),!1})}}var q={};"undefined"!=typeof qode&&(qode.modules.socialLogin=q),q.qodeUserLogin=r,q.qodeUserRegister=d,q.qodeUserLostPassword=c,q.qodeInitLoginWidgetModal=a,q.qodeInitFacebookLogin=u,q.qodeInitGooglePlusLogin=g,q.qodeUpdateUserProfile=v,e(document).ready(o),e(window).load(n),e(window).resize(t),e(window).scroll(i)}(jQuery);